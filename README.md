# Каталог исполнителей и их альбомов

## Инструкция по запуску

1. Клонировать репозиторий:
```
git clone https://github.com/TimofeevSergey/music_catalog.git
```
2. Перейти в каталог проекта:
```
cd music_catalog
```

### _Примечание:_
Действия 3-5 необходимы, если docker-контейнеры будут установлены на одном компьютере,
а доступ к предоставляемому ими API будет осуществляться по сети с другого компьютера.
При тестировании на одном компьютере (по адресу `http://localhost` или `http://127.0.0.1`)
эти шаги можно пропустить.

3. Перейти в подкаталог:
```
cd music_catalog
```
4. В данном подкаталоге исправить файл `.env.prod`

В строчках:
```
ALLOWED_HOSTS=localhost 127.0.0.1
CSRF_TRUSTED_ORIGINS=http://localhost http://127.0.0.1
```
вместо `localhost 127.0.0.1` и `http://localhost http://127.0.0.1`
указать фактический IP-адрес компьютера (ниже этот адрес будет указан как `<IP-адрес>` ),
на котором будут установлены docker-контейнеры (требование системы безопасности django).

5. Вернуться в каталог проекта:
```
cd ..
```

6. Запустить создание и выполнение docker-контейнеров:
```
docker-compose up --build
```

В результате будут созданы и запущены 3 взаимосвязанных контейнера:
1). postgres-13.10
2). python-3.8.16 с django, djangorestframework и собственно исполняемым проектом
3). nginx 1.22.1 для доступа из вне (настроен по стандартному 80 порту, при доступе к API порт указывать не нужно)


## Доступ к API

Доступ к просмотру данных в API реализован для всех пользователей без авторизации.
Для выполнения операций добавления, изменения и удаления записей необходима авторизация.
Для простоты авторизация реализована в варианте `Basic Auth` - необходимо указать имя пользователя (логин) и пароль.
Для целей тестирования в базу данных добавлена запись пользователя:
```
Логин: fan
Пароль: FanApiAccess
```
Так же при создании docker-контейнеров во все таблицы базы данных заносится небольшое число записей для первичного просмотра.

API доступен через WEB-сервер nginx по IP-адресу компьютера, на котором были развернуты docker-контейнеры:
```
http://<IP-адрес>
```
или если тестируется локально:
```
http://localhost
```

Кроме того в WEB-браузере по этим же адресам доступен просмотр API и редактирование данных в формате предоставляемом djangorestframework.

А по адресам:
```
http://<IP-адрес>/swagger-ui/
```
или если тестируется локально:
```
http://localhost/swagger-ui/
```
доступен просмотр API и редактирование данных в формате предоставляемом фреймворком Swagger UI.
